//var socket = io.connect('http://coms-319-099.cs.iastate.edu:8080/');
var socket = io.connect('localhost:8080/');

var updateBtn1 = document.getElementById("updateP1");
var player1chara = document.getElementById("p1Char");
var player1alt = document.getElementById("p1Alt");
var player2chara = document.getElementById("p2Char");
var player2alt = document.getElementById("p2Alt");

var modCheckBoolean=false;

var titleBtn = document.getElementById("updateTitle");

socket.on('connect', function(data)
{
	socket.emit('join', 'Hello World from client');
});

socket.on('returnCheck1', function(result)
{
	modCheckBoolean=result;

	if(player1chara.value=="miifighter" || player1chara.value=="miiswordsman" || player1chara.value=="miigunner")
	{
		if(modCheckBoolean)
		{
			document.getElementById("p1Preview").src="./mods/chara_2_"+player1chara.value+"_00.png";
		}
		else
		{
			document.getElementById("p1Preview").src="./node_modules/Stocks/chara_2_"+player1chara.value+"_00.png";
		}
	}
	else
	{
		if(modCheckBoolean)
		{
			document.getElementById("p1Preview").src="./mods/chara_2_"+player1chara.value+"_0"+player1alt.value+".png";
		}
		else
		{
			document.getElementById("p1Preview").src="./node_modules/Stocks/chara_2_"+player1chara.value+"_0"+player1alt.value+".png";
		}
	}

	modCheckBoolean=false;
});

socket.on('returnCheck2', function(result)
{
	modCheckBoolean=result;

	if(player2chara.value=="miifighter" || player2chara.value=="miiswordsman" || player2chara.value=="miigunner")
	{
		if(modCheckBoolean)
		{
			document.getElementById("p2Preview").src="./mods/chara_2_"+player2chara.value+"_00.png";
		}
		else
		{
			document.getElementById("p2Preview").src="./node_modules/Stocks/chara_2_"+player2chara.value+"_00.png";
		}
	}
	else
	{
		if(modCheckBoolean)
		{
			document.getElementById("p2Preview").src="./mods/chara_2_"+player2chara.value+"_0"+player2alt.value+".png";
		}
		else
		{
			document.getElementById("p2Preview").src="./node_modules/Stocks/chara_2_"+player2chara.value+"_0"+player2alt.value+".png";
		}
	}

	modCheckBoolean=false;
});

$('#updateP1').click(function(s,err)
{
	if(err)
	{
		console.log(err);
	}
	else
	{
		s.preventDefault();
		socket.emit('stock_update',document.getElementById("p1Char").value,document.getElementById("p1Alt").value,"1");
		var stock = document.getElementById("p1Current");
		stock.src="./updateables/stock1.png?t="+ new Date().getTime();
	}
});

$('#updateP2').click(function(r)
{
	r.preventDefault();
	socket.emit('stock_update',document.getElementById("p2Char").value,document.getElementById("p2Alt").value,"2");
	var stock = document.getElementById("p2Current");
	stock.src="./updateables/stock2.png?t="+ new Date().getTime();
});

$('#updateTitle').click(function(t)
{
	t.preventDefault();
	socket.emit('text_update',document.getElementById("titleName").value,"title");
});

$('#updateP1Score').click(function(sp1)
{
	sp1.preventDefault();
	socket.emit('text_update',document.getElementById("p1Score").value,"score1");
});

$('#updateP2Score').click(function(sp1)
{
	sp1.preventDefault();
	socket.emit('text_update',document.getElementById("p2Score").value,"score2");
});

$('#updateP1Name').click(function(np1)
{
	np1.preventDefault();
	socket.emit('text_update',document.getElementById("p1Name").value,"name1");
});

$('#updateP2Name').click(function(np2)
{
	np2.preventDefault();
	socket.emit('text_update',document.getElementById("p2Name").value,"name2");
});

$('#updateInfo1').click(function(np1)
{
	np1.preventDefault();
	socket.emit('text_update',document.getElementById("info1").value,"info1");
});

$('#updateInfo2').click(function(np2)
{
	np2.preventDefault();
	socket.emit('text_update',document.getElementById("info2").value,"info2");
});

$('#p1Char').change(function(pc1)//player1chara.onchange = function()
{
	pc1.preventDefault();
	socket.emit('checkPath',"./mods/chara_2_"+player1chara.value+"_0"+player1alt.value+".png",'1');
});

$('#p1Alt').change(function(ac1)//player1chara.onchange = function()
{
	ac1.preventDefault();
	socket.emit('checkPath',"./mods/chara_2_"+player1chara.value+"_0"+player1alt.value+".png",'1');
});

$('#p2Char').change(function(pc2)
{
	pc2.preventDefault();
	socket.emit('checkPath',"./mods/chara_2_"+player2chara.value+"_0"+player2alt.value+".png",'2');
});

$('#p2Alt').change(function(pc2)
{
	pc2.preventDefault();
	socket.emit('checkPath',"./mods/chara_2_"+player2chara.value+"_0"+player2alt.value+".png",'2');
});










